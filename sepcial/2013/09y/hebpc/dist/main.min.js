/*! main 13-11-2013 */
define(function(a){var b=a("./shadow"),c=a("./slide"),d=a("./submit");a("./marquee"),b.shadow(".shadow",".dialog",".addr .submit"),b.slide(".ctn2 ul.right li","#alt_tip",".ctn2 .img img"),c({elem:".img ul li",thumb:".img ol li",parentEl:".top_ctn .img"}),$(".autoplay").kxbdMarquee(),$(".autoplay ul li").click(function(){var a=$(this).find("a img").attr("src");return $(".ctn3 .left img").attr("src",a),!1}),d(".dialog .form form")}),function(a){a.fn.kxbdMarquee=function(b){var c=a.extend({},a.fn.kxbdMarquee.defaults,b);return this.each(function(){function b(){var a="left"==c.direction||"right"==c.direction?"scrollLeft":"scrollTop";if(c.loop>0&&(m+=c.scrollAmount,m>j*c.loop))return e[a]=0,clearInterval(l);if("left"==c.direction||"up"==c.direction){var b=e[a]+c.scrollAmount;b>=j&&(b-=j),e[a]=b}else{var b=e[a]-c.scrollAmount;0>=b&&(b+=j),e[a]=b}}var d=a(this),e=d.get(0),f=d.width(),g=d.height(),h=d.children(),i=h.children(),j=0,k="left"==c.direction||"right"==c.direction?1:0;if(h.css(k?"width":"height",1e4),c.isEqual?j=i[k?"outerWidth":"outerHeight"]()*i.length:i.each(function(){j+=a(this)[k?"outerWidth":"outerHeight"]()}),!((k?f:g)>j)){h.append(i.clone()).css(k?"width":"height",2*j);var l,m=0;c.delay>0?setTimeout(function(){l=setInterval(b,c.scrollDelay)},1e3*c.delay):l=setInterval(b,c.scrollDelay),d.hover(function(){clearInterval(l)},function(){clearInterval(l),l=setInterval(b,c.scrollDelay)}),c.controlBtn&&a.each(c.controlBtn,function(b,d){a(d).bind(c.eventA,function(){c.direction=b,c.oldAmount=c.scrollAmount,c.scrollAmount=c.newAmount}).bind(c.eventB,function(){c.scrollAmount=c.oldAmount})})}})},a.fn.kxbdMarquee.defaults={delay:0,isEqual:!0,loop:0,direction:"left",scrollAmount:1,scrollDelay:30,newAmount:3,eventA:"mousedown",eventB:"mouseup"},a.fn.kxbdMarquee.setDefaults=function(b){a.extend(a.fn.kxbdMarquee.defaults,b)}}(jQuery),define(function(a,b,c){var d=function(a,b,c){var d={width:$(document).width(),height:$(document).height(),opacity:.6};$(c).bind("click",function(){return $(a).css(d).show(),$(b).show(),!1}),$(b).find(".close").bind("click",function(){return $(b).hide(),$(a).hide(),!1})},e=function(a,b,c){$(b).html($(a).eq(0).find("a img").attr("alt")),$(a).each(function(){$(this).bind("click",function(){$(c).attr("src",$(this).find("a img").attr("src")),$(this).addClass("cur").siblings("li").removeClass("cur"),$(b).html($(this).find("a img").attr("alt"))})})},f=function(a){function b(){setInterval(function(){},1e3)}var c=($(a).find("li").width(),$(a).width());console.log(c),b()};c.exports={shadow:d,slide:e,marquee:f}}),define(function(a,b,c){var d=function(a){function b(){c||(c=0),d||clearInterval(d),d=setInterval(function(){c==f-1?c=0:c++,$(a.thumb).eq(c).addClass(a.curStyle).siblings("li").removeClass(a.curStyle),$(a.elem).eq(c).fadeIn(a.during).siblings("li").fadeOut(a.during)},a.speed)}var c,d,e={elem:".content .nav-src ul li",thumb:".content .nav-src ol li",curStyle:"cur",parentEl:".nav-src",during:500,speed:3e3,type:"mouseover"},a=$.extend(e,a||{});$(a.elem).eq(0).show().siblings("li").hide(),$(a.thumb).each(function(b){$(this).bind(a.type,function(){c=b,$(this).addClass(a.curStyle).siblings("li").removeClass(a.curStyle),$(a.elem).eq(b).fadeIn(a.during).siblings("li").fadeOut(a.during)})});var f=$(a.thumb).length;b(),$(a.parentEl).hover(function(){clearInterval(d)},function(){b()})};c.exports=d}),define(function(a,b,c){var d=function(a){function b(a,b,c){var d="http://api.csc86.com/member/";b=d+b,c=d+c,$.ajax({type:"get",url:b,dataType:"jsonp",data:"",success:function(b){b.status&&$.get(c,{type:"json"},function(c){$(a).html('<a href="http://member.csc86.com/" target="_blank" id="J_signEd" data-memberid="'+b.data.userName+'">'+b.data.userName+'</a>！消息<a href="http://member.csc86.com/membercenter/messageall/" target="_blank" class="top-msg-num">'+c.data.count+'</a><span class="v-line"></span><a href="http://member.csc86.com/login/logout">退出</a>')},"jsonp")},error:function(){alert(this.url)}})}b("span.bd","isLogin.html","messagecount.html"),$(a).submit(function(){var a=$('input[name="contacts"]'),b=$('input[name="phone"]');return""==$.trim(a.val())||""==$.trim(b.val())?(""==$.trim(a.val())?a.css("border-color","red").focus().blur(function(){$(this).css("border-color","#dedede")}):b.css("border-color","red").focus().blur(function(){$(this).css("border-color","#dedede")}),!1):($.post("http://cncms.csc86.com/formguide/index.php",$(this).serialize(),function(a){1==a.status?alert("恭喜您！申请加入成功！"):alert("申请失败！请刷新后重试！")},"jsonp"),!0)})};c.exports=d});